(()=>{"use strict";const e=function(e){return 0===Math.floor(e/10)?"0"+e:e};function t(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,u=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return c=e.done,e},e:function(e){u=!0,a=e},f:function(){try{c||null==o.return||o.return()}finally{if(u)throw a}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}const o=function(e){var t=document.getElementById(e),n=document.createElement("div");n.style.cssText="font-size: 2rem;",t.addEventListener("submit",(function(e){e.preventDefault();var o=new FormData(t),r={};o.forEach((function(e,t){return r[t]=e})),t.appendChild(n),n.innerHTML='\n    <div class="preload-block"></div>\n    ',function(e){return fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(r).then((function(e){if(200!==e.status)throw new Error("status network not 200!");n.textContent="Сообщение отправлено! Скоро с Вами свяжемся!",t.reset(),setTimeout((function(){n.textContent=""}),5e3)})).catch((function(e){n.textContent="Что-то пошло не так...",console.error(e),setTimeout((function(){n.textContent=""}),5e3)}))}))};var r,i,a,c,u,l,s,d,v,f,m,h,p,y,g,L,E,q,S,b,w,A,_,x,C,M,k;A=document.querySelector("#timer-hours"),_=document.querySelector("#timer-minutes"),x=document.querySelector("#timer-seconds"),C=document.querySelector("#timer-days"),M=null,(k=function(){var t,n,o,r,i=(t=(new Date("27 july 2021 12:43:50").getTime()-(new Date).getTime())/1e3,n=Math.floor(t%60),o=Math.floor(t/60%60),r=Math.floor(t/60/60%24),{timeRemaining:t,days:Math.floor(t/60/60/24),hours:r,minutes:o,seconds:n});i.timeRemaining<=0&&(M&&(clearInterval(M),M=null),i.hours=0,i.minutes=0,i.seconds=0,i.days=0),A.textContent=e(i.hours),_.textContent=e(i.minutes),x.textContent=e(i.seconds),C.textContent=e(i.days)})(),M=setInterval(k,1e3),S=document.querySelector("body"),b=document.querySelector("menu"),w=function(){b.classList.contains("active-menu")?b.classList.remove("active-menu"):b.classList.add("active-menu")},S.addEventListener("click",(function(e){var t=e.target;t.classList.contains("close-btn")&&e.preventDefault(),b.classList.contains("active-menu")?t.closest("menu")?(t=t.closest("a"))&&w():w():t.closest(".menu")&&w()})),function(){var e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),n=document.querySelector(".popup-content"),o=document.querySelector("body"),r=document.documentElement.clientWidth;window.addEventListener("resize",(function(){r=document.documentElement.clientWidth}));var i=function(e){var t=e.duration,n=e.draw,o=e.timing,r=performance.now();requestAnimationFrame((function e(i){var a=(i-r)/t;a>1&&(a=1);var c=o(a);n(c),a<1&&requestAnimationFrame(e)}))},a=function(){r>=768?(i({duration:800,timing:function(e){return Math.pow(e,5)},draw:function(e){n.style.top=-1*e*100+"%"}}),setTimeout((function(){e.classList.remove("active"),o.classList.remove("no-scroll"),o.style.paddingRight=""}),800)):(n.style.top="",e.classList.remove("active"),o.classList.remove("no-scroll"),o.style.paddingRight="")};o.addEventListener("keydown",(function(t){t.key,e.classList.contains("active")&&a()})),t.forEach((function(t){t.addEventListener("click",(function(){e.classList.add("active"),o.classList.add("no-scroll"),o.style.paddingRight=function(){var e=document.createElement("div");e.style.overflowY="scroll",e.style.width="50px",e.style.height="50px",document.body.append(e);var t=e.offsetWidth-e.clientWidth;return e.remove(),t}()+"px",n.style.top="",r>=768&&i({duration:800,timing:function(e){return Math.pow(e,3)},draw:function(e){n.style.top=100*(-1+e)+"%"}})}))})),e.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?a():(t=t.closest(".popup-content"))||a()}))}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=document.querySelectorAll('a[href^="#"]:not([href="#"])'),n=function(t){t.preventDefault();var n=0,o=window.pageYOffset,r=t.target.closest("a").getAttribute("href"),i=document.querySelector(r).getBoundingClientRect().top-10;requestAnimationFrame((function t(r){n||(n=r);var a=r-n,c=i<0?Math.max(o-a/e,o+i):Math.min(o+a/e,o+i);window.scrollTo(0,c),c<o+i&&requestAnimationFrame(t)}))};t.forEach((function(e){return e.addEventListener("click",n)}))}(.3),L=document.querySelector(".service-header"),E=L.querySelectorAll(".service-header-tab"),q=document.querySelectorAll(".service-tab"),L.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&E.forEach((function(e,n){e===t&&function(e){for(var t=0;t<q.length;t++)t===e?(E[t].classList.add("active"),q[t].classList.remove("d-none")):(E[t].classList.remove("active"),q[t].classList.add("d-none"))}(n)}))})),function(){var e,t=document.querySelectorAll(".portfolio-item"),n=document.querySelector(".portfolio-dots"),o=document.querySelector(".portfolio-content"),r=0,i=function(e,t,n){e[t].classList.remove(n)},a=function(e,t,n){e[t].classList.add(n)},c=function(){i(t,r,"portfolio-item-active"),i(n.childNodes,r,"dot-active"),++r>=t.length&&(r=0),a(t,r,"portfolio-item-active"),a(n.childNodes,r,"dot-active")},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;e=setInterval(c,t)};o.addEventListener("click",(function(e){e.preventDefault();var o=e.target;o.matches(".portfolio-btn, .dot")&&(i(t,r,"portfolio-item-active"),i(n.childNodes,r,"dot-active"),o.matches("#arrow-right")?r++:o.matches("#arrow-left")?r--:o.matches(".dot")&&n.childNodes.forEach((function(e,t){e===o&&(r=t)})),r>=t.length&&(r=0),r<0&&(r=t.length-1),a(t,r,"portfolio-item-active"),a(n.childNodes,r,"dot-active"))})),o.addEventListener("mouseover",(function(t){t.target.matches(".portfolio-btn, .dot")&&clearInterval(e)})),o.addEventListener("mouseout",(function(e){e.target.matches(".portfolio-btn, .dot")&&u(1500)}));var l=document.createElement("li");l.className="dot";for(var s=0;s<t.length;s++){var d=l.cloneNode();n.append(d)}n.childNodes[r].classList.add("dot-active"),u(1500)}(),y=document.querySelectorAll(".command__photo"),g=function(){var e=this.getAttribute("src");this.setAttribute("src",this.dataset.img),this.dataset.img=e},y.forEach((function(e){e.addEventListener("mouseenter",g),e.addEventListener("mouseleave",g)})),h=document.querySelectorAll("input.calc-item"),p=function(){this.value=this.value.replace(/\D/g,"")},h.forEach((function(e){e.addEventListener("input",p)})),r=function(){this.value=this.value.replace(/[^а-яё ]/gi,"")},i=function(){this.value=this.value.replace(/(?![~@\-!_\.\*'])[\W\d]/gi,"")},a=function(){this.value=this.value.replace(/(?![\(\)\+])\D/gi,"")},c=function(e){e.value=e.value.replace(/^[ \-]*/,""),e.value=e.value.replace(/[ \-]*$/,"")},u=function(e){e.value=e.value.replace(/ +/g," ")},l=function(e){e.value=e.value.replace(/-+/g,"-")},s=function(e){e.value=e.value.replace(/^(.{1})(.*)/,(function(e,t,n){return t.toUpperCase()+n.toLowerCase()}))},d=document.querySelectorAll('[name="user_name"]'),v=document.querySelector('[name="user_message"]'),f=document.querySelectorAll('[name="user_email"]'),m=document.querySelectorAll('[name="user_phone"]'),function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+7 (___) ___-__-__";function o(e){var t=e.keyCode,o=n,r=o.replace(/\D/g,""),i=this.value.replace(/\D/g,""),a=0,c=o.replace(/[_\d]/g,(function(e){return a<i.length?i.charAt(a++)||r.charAt(a):e}));-1!=(a=c.indexOf("_"))&&(c=c.slice(0,a));var u=o.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(u=new RegExp("^"+u+"$")).test(this.value)||this.value.length<5||t>47&&t<58)&&(this.value=c),"blur"==e.type&&this.value.length<5&&(this.value="")}var r,i=t(document.querySelectorAll(e));try{for(i.s();!(r=i.n()).done;){var a=r.value;a.addEventListener("input",o),a.addEventListener("focus",o),a.addEventListener("blur",o)}}catch(e){i.e(e)}finally{i.f()}}(".form-phone"),v.addEventListener("input",(function(){this.value=this.value.replace(/[^а-яё ,\.!\?;\d]/gi,"")})),v.addEventListener("blur",(function(){c(this),u(this),l(this),s(this)})),d.forEach((function(e){e.addEventListener("input",r),e.addEventListener("blur",(function(){c(this),u(this),l(this),s(this)}))})),f.forEach((function(e){e.addEventListener("input",i),e.addEventListener("blur",(function(){c(this),l(this)}))})),m.forEach((function(e){e.addEventListener("input",a),e.addEventListener("blur",(function(){c(this),l(this)}))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-count"),i=document.querySelector(".calc-day"),a=document.getElementById("total"),c=function(){var t=0,c=1,u=1,l=0,s=0,d=+n.value,v=+o.value;r.value>1&&(c+=(r.value-1)/10),i.value&&i.value<5?u*=2:i.value&&i.value<10&&(u*=1.5),d&&v&&(t=e*d*v*c*u),a.textContent=l,t&&(s=requestAnimationFrame((function e(n){l+=Math.floor(Math.pow(l/5+1,1.5)),a.textContent=l,l<Math.floor(t)&&s?s=requestAnimationFrame(e):a.textContent=Math.floor(t)})))};t.addEventListener("change",(function(e){e.target.matches(".calc-item")&&c()}))}(100),o("form1"),o("form2"),o("form3")})();