(()=>{"use strict";const e=function(e){return 0===Math.floor(e/10)?"0"+e:e},t=function(e){var t=document.getElementById(e),n=document.createElement("div");n.style.cssText="font-size: 2rem;",t.addEventListener("submit",(function(e){e.preventDefault();var o=new FormData(t),c={};o.forEach((function(e,t){return c[t]=e})),t.appendChild(n),n.innerHTML='\n    <div class="preload-block"></div>\n    ',function(e){return fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(c).then((function(e){if(200!==e.status)throw new Error("status network not 200!");n.textContent="Сообщение отправлено! Скоро с Вами свяжемся!",t.reset(),setTimeout((function(){n.textContent=""}),5e3)})).catch((function(e){n.textContent="Что-то пошло не так...",console.error(e),setTimeout((function(){n.textContent=""}),5e3)}))}))};var n,o,c,i,r,a,u,s,l,d,m,v,f,h,p,y,g,L,E,q,S,w,b,A,C,M,x;w=document.querySelector("#timer-hours"),b=document.querySelector("#timer-minutes"),A=document.querySelector("#timer-seconds"),C=document.querySelector("#timer-days"),M=null,(x=function(){var t,n,o,c,i=(t=(new Date("27 july 2021 12:43:50").getTime()-(new Date).getTime())/1e3,n=Math.floor(t%60),o=Math.floor(t/60%60),c=Math.floor(t/60/60%24),{timeRemaining:t,days:Math.floor(t/60/60/24),hours:c,minutes:o,seconds:n});i.timeRemaining<=0&&(M&&(clearInterval(M),M=null),i.hours=0,i.minutes=0,i.seconds=0,i.days=0),w.textContent=e(i.hours),b.textContent=e(i.minutes),A.textContent=e(i.seconds),C.textContent=e(i.days)})(),M=setInterval(x,1e3),E=document.querySelector("body"),q=document.querySelector("menu"),S=function(){q.classList.contains("active-menu")?q.classList.remove("active-menu"):q.classList.add("active-menu")},E.addEventListener("click",(function(e){var t=e.target;t.classList.contains("close-btn")&&e.preventDefault(),q.classList.contains("active-menu")?t.closest("menu")?(t=t.closest("a"))&&S():S():t.closest(".menu")&&S()})),function(){var e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),n=document.querySelector(".popup-content"),o=document.documentElement.clientWidth;window.addEventListener("resize",(function(){o=document.documentElement.clientWidth}));var c=function(e){var t=e.duration,n=e.draw,o=e.timing,c=performance.now();requestAnimationFrame((function e(i){var r=(i-c)/t;r>1&&(r=1);var a=o(r);n(a),r<1&&requestAnimationFrame(e)}))},i=function(){o>=768?(c({duration:800,timing:function(e){return Math.pow(e,5)},draw:function(e){n.style.top=-1*e*100+"%"}}),setTimeout((function(){e.classList.remove("active")}),800)):(n.style.top="",e.classList.remove("active"))};t.forEach((function(t){t.addEventListener("click",(function(){e.classList.add("active"),n.style.top="",o>=768&&c({duration:800,timing:function(e){return Math.pow(e,3)},draw:function(e){n.style.top=100*(-1+e)+"%"}})}))})),e.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?i():(t=t.closest(".popup-content"))||i()}))}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=document.querySelectorAll('a[href^="#"]:not([href="#"])'),n=function(t){t.preventDefault();var n=0,o=window.pageYOffset,c=t.target.closest("a").getAttribute("href"),i=document.querySelector(c).getBoundingClientRect().top-10;requestAnimationFrame((function t(c){n||(n=c);var r=c-n,a=i<0?Math.max(o-r/e,o+i):Math.min(o+r/e,o+i);window.scrollTo(0,a),a<o+i&&requestAnimationFrame(t)}))};t.forEach((function(e){return e.addEventListener("click",n)}))}(.3),y=document.querySelector(".service-header"),g=y.querySelectorAll(".service-header-tab"),L=document.querySelectorAll(".service-tab"),y.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&g.forEach((function(e,n){e===t&&function(e){for(var t=0;t<L.length;t++)t===e?(g[t].classList.add("active"),L[t].classList.remove("d-none")):(g[t].classList.remove("active"),L[t].classList.add("d-none"))}(n)}))})),function(){var e,t=document.querySelectorAll(".portfolio-item"),n=document.querySelector(".portfolio-dots"),o=document.querySelector(".portfolio-content"),c=0,i=function(e,t,n){e[t].classList.remove(n)},r=function(e,t,n){e[t].classList.add(n)},a=function(){i(t,c,"portfolio-item-active"),i(n.childNodes,c,"dot-active"),++c>=t.length&&(c=0),r(t,c,"portfolio-item-active"),r(n.childNodes,c,"dot-active")},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;e=setInterval(a,t)};o.addEventListener("click",(function(e){e.preventDefault();var o=e.target;o.matches(".portfolio-btn, .dot")&&(i(t,c,"portfolio-item-active"),i(n.childNodes,c,"dot-active"),o.matches("#arrow-right")?c++:o.matches("#arrow-left")?c--:o.matches(".dot")&&n.childNodes.forEach((function(e,t){e===o&&(c=t)})),c>=t.length&&(c=0),c<0&&(c=t.length-1),r(t,c,"portfolio-item-active"),r(n.childNodes,c,"dot-active"))})),o.addEventListener("mouseover",(function(t){t.target.matches(".portfolio-btn, .dot")&&clearInterval(e)})),o.addEventListener("mouseout",(function(e){e.target.matches(".portfolio-btn, .dot")&&u(1500)}));var s=document.createElement("li");s.className="dot";for(var l=0;l<t.length;l++){var d=s.cloneNode();n.append(d)}n.childNodes[c].classList.add("dot-active"),u(1500)}(),h=document.querySelectorAll(".command__photo"),p=function(){var e=this.getAttribute("src");this.setAttribute("src",this.dataset.img),this.dataset.img=e},h.forEach((function(e){e.addEventListener("mouseenter",p),e.addEventListener("mouseleave",p)})),v=document.querySelectorAll("input.calc-item"),f=function(){this.value=this.value.replace(/\D/g,"")},v.forEach((function(e){e.addEventListener("input",f)})),n=function(){this.value=this.value.replace(/[^а-яё ]/gi,"")},o=function(){this.value=this.value.replace(/(?![~@\-!_\.\*'])[\W\d]/gi,"")},c=function(){this.value=this.value.replace(/(?![+])\D/gi,"")},i=function(e){e.value=e.value.replace(/^[ \-]*/,""),e.value=e.value.replace(/[ \-]*$/,"")},r=function(e){e.value=e.value.replace(/ +/g," ")},a=function(e){e.value=e.value.replace(/-+/g,"-")},u=function(e){e.value=e.value.replace(/^(.{1})(.*)/,(function(e,t,n){return t.toUpperCase()+n.toLowerCase()}))},s=document.querySelectorAll('[name="user_name"]'),l=document.querySelector('[name="user_message"]'),d=document.querySelectorAll('[name="user_email"]'),m=document.querySelectorAll('[name="user_phone"]'),l.addEventListener("input",(function(){this.value=this.value.replace(/[^а-яё ,\.!\?;\d]/gi,"")})),l.addEventListener("blur",(function(){i(this),r(this),a(this),u(this)})),s.forEach((function(e){e.addEventListener("input",n),e.addEventListener("blur",(function(){i(this),r(this),a(this),u(this)}))})),d.forEach((function(e){e.addEventListener("input",o),e.addEventListener("blur",(function(){i(this),a(this)}))})),m.forEach((function(e){e.addEventListener("input",c),e.addEventListener("blur",(function(){i(this),a(this)}))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),c=document.querySelector(".calc-count"),i=document.querySelector(".calc-day"),r=document.getElementById("total"),a=function(){var t=0,a=1,u=1,s=0,l=0,d=+n.value,m=+o.value;c.value>1&&(a+=(c.value-1)/10),i.value&&i.value<5?u*=2:i.value&&i.value<10&&(u*=1.5),d&&m&&(t=e*d*m*a*u),r.textContent=s,t&&(l=requestAnimationFrame((function e(n){s+=Math.floor(Math.pow(s/5+1,1.5)),r.textContent=s,s<Math.floor(t)&&l?l=requestAnimationFrame(e):r.textContent=Math.floor(t)})))};t.addEventListener("change",(function(e){e.target.matches(".calc-item")&&a()}))}(100),t("form1"),t("form2"),t("form3")})();