(()=>{"use strict";const e=function(e){return 0===Math.floor(e/10)?"0"+e:e},t=e=>{const t=document.getElementById(e),n=document.createElement("div");n.style.cssText="font-size: 2rem;",t.addEventListener("submit",(e=>{e.preventDefault();const o=new FormData(t),c={};o.forEach(((e,t)=>c[t]=e)),t.appendChild(n),n.innerHTML='\n    <div class="preload-block"></div>\n    ',(e=>fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(c).then((e=>{if(200!==e.status)throw new Error("status network not 200!");n.textContent="Сообщение отправлено! Скоро с Вами свяжемся!",t.reset(),setTimeout((()=>{n.textContent=""}),5e3)})).catch((e=>{n.textContent="Что-то пошло не так...",console.error(e),setTimeout((()=>{n.textContent=""}),5e3)}))}))};(t=>{const n=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),c=document.querySelector("#timer-seconds"),s=document.querySelector("#timer-days");let r=null;const a=()=>{const t=(()=>{const e=(new Date("27 july 2021 12:43:50").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60),o=Math.floor(e/60/60%24);return{timeRemaining:e,days:Math.floor(e/60/60/24),hours:o,minutes:n,seconds:t}})();t.timeRemaining<=0&&(r&&(clearInterval(r),r=null),t.hours=0,t.minutes=0,t.seconds=0,t.days=0),n.textContent=e(t.hours),o.textContent=e(t.minutes),c.textContent=e(t.seconds),s.textContent=e(t.days)};a(),r=setInterval(a,1e3)})(),(()=>{const e=document.querySelector("body"),t=document.querySelector("menu"),n=()=>{t.classList.contains("active-menu")?t.classList.remove("active-menu"):t.classList.add("active-menu")};e.addEventListener("click",(e=>{let o=e.target;o.classList.contains("close-btn")&&e.preventDefault(),t.classList.contains("active-menu")?o.closest("menu")?(o=o.closest("a"),o&&n()):n():o.closest(".menu")&&n()}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),n=document.querySelector(".popup-content"),o=document.querySelector("body");let c=document.documentElement.clientWidth;window.addEventListener("resize",(()=>{c=document.documentElement.clientWidth}));const s=({duration:e,draw:t,timing:n})=>{const o=performance.now();requestAnimationFrame((function c(s){let r=(s-o)/e;r>1&&(r=1);const a=n(r);t(a),r<1&&requestAnimationFrame(c)}))},r=()=>{c>=768?(s({duration:800,timing:e=>Math.pow(e,5),draw(e){n.style.top=-1*e*100+"%"}}),setTimeout((()=>{e.classList.remove("active"),o.classList.remove("no-scroll"),o.style.paddingRight=""}),800)):(n.style.top="",e.classList.remove("active"),o.classList.remove("no-scroll"),o.style.paddingRight="")};o.addEventListener("keydown",(t=>{t.key,e.classList.contains("active")&&r()})),t.forEach((t=>{t.addEventListener("click",(()=>{e.classList.add("active"),o.classList.add("no-scroll"),o.style.paddingRight=(()=>{let e=document.createElement("div");e.style.overflowY="scroll",e.style.width="50px",e.style.height="50px",document.body.append(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t})()+"px",n.style.top="",c>=768&&s({duration:800,timing:e=>Math.pow(e,3),draw(e){n.style.top=100*(-1+e)+"%"}})}))})),e.addEventListener("click",(e=>{let t=e.target;t.classList.contains("popup-close")?r():(t=t.closest(".popup-content"),t||r())}))})(),((e=.5)=>{const t=document.querySelectorAll('a[href^="#"]:not([href="#"])'),n=t=>{t.preventDefault();let n=0;const o=window.pageYOffset,c=t.target.closest("a").getAttribute("href"),s=document.querySelector(c).getBoundingClientRect().top-10,r=t=>{n||(n=t);const c=t-n,a=s<0?Math.max(o-c/e,o+s):Math.min(o+c/e,o+s);window.scrollTo(0,a),a<o+s&&requestAnimationFrame(r)};requestAnimationFrame(r)};t.forEach((e=>e.addEventListener("click",n)))})(.3),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let o=e.target;o=o.closest(".service-header-tab"),o&&t.forEach(((e,c)=>{e===o&&(e=>{for(let o=0;o<n.length;o++)o===e?(t[o].classList.add("active"),n[o].classList.remove("d-none")):(t[o].classList.remove("active"),n[o].classList.add("d-none"))})(c)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots"),n=document.querySelector(".portfolio-content");let o,c=0;const s=(e,t,n)=>{e[t].classList.remove(n)},r=(e,t,n)=>{e[t].classList.add(n)},a=()=>{s(e,c,"portfolio-item-active"),s(t.childNodes,c,"dot-active"),c++,c>=e.length&&(c=0),r(e,c,"portfolio-item-active"),r(t.childNodes,c,"dot-active")},l=(e=3e3)=>{o=setInterval(a,e)};n.addEventListener("click",(n=>{n.preventDefault();let o=n.target;o.matches(".portfolio-btn, .dot")&&(s(e,c,"portfolio-item-active"),s(t.childNodes,c,"dot-active"),o.matches("#arrow-right")?c++:o.matches("#arrow-left")?c--:o.matches(".dot")&&t.childNodes.forEach(((e,t)=>{e===o&&(c=t)})),c>=e.length&&(c=0),c<0&&(c=e.length-1),r(e,c,"portfolio-item-active"),r(t.childNodes,c,"dot-active"))})),n.addEventListener("mouseover",(e=>{e.target.matches(".portfolio-btn, .dot")&&clearInterval(o)})),n.addEventListener("mouseout",(e=>{e.target.matches(".portfolio-btn, .dot")&&l(1500)}));const i=document.createElement("li");i.className="dot";for(let n=0;n<e.length;n++){const e=i.cloneNode();t.append(e)}t.childNodes[c].classList.add("dot-active"),l(1500)})(),(()=>{const e=document.querySelectorAll(".command__photo"),t=function(){const e=this.getAttribute("src");this.setAttribute("src",this.dataset.img),this.dataset.img=e};e.forEach((e=>{e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",t)}))})(),(()=>{const e=document.querySelectorAll("input.calc-item"),t=function(){this.value=this.value.replace(/\D/g,"")};e.forEach((e=>{e.addEventListener("input",t)}))})(),(()=>{const e=function(){this.value=this.value.replace(/[^а-яё ]/gi,"")},t=function(){this.value=this.value.replace(/(?![~@\-!_\.\*'])[\W\d]/gi,"")},n=function(){this.value=this.value.replace(/(?![\(\)\+])\D/gi,"")},o=function(e){e.value=e.value.replace(/^[ \-]*/,""),e.value=e.value.replace(/[ \-]*$/,"")},c=function(e){e.value=e.value.replace(/ +/g," ")},s=function(e){e.value=e.value.replace(/-+/g,"-")},r=function(e){e.value=e.value.replace(/^(.{1})(.*)/,((e,t,n)=>t.toUpperCase()+n.toLowerCase()))},a=document.querySelectorAll('[name="user_name"]'),l=document.querySelector('[name="user_message"]'),i=document.querySelectorAll('[name="user_email"]'),u=document.querySelectorAll('[name="user_phone"]');(function(e,t="+7 (___) ___-__-__"){const n=document.querySelectorAll(e);function o(e){const n=e.keyCode,o=t,c=o.replace(/\D/g,""),s=this.value.replace(/\D/g,"");let r=0,a=o.replace(/[_\d]/g,(function(e){return r<s.length?s.charAt(r++)||c.charAt(r):e}));r=a.indexOf("_"),-1!=r&&(a=a.slice(0,r));let l=o.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");l=new RegExp("^"+l+"$"),(!l.test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=a),"blur"==e.type&&this.value.length<5&&(this.value="")}for(const e of n)e.addEventListener("input",o),e.addEventListener("focus",o),e.addEventListener("blur",o)})(".form-phone"),l.addEventListener("input",(function(){this.value=this.value.replace(/[^а-яё ,\.!\?;\d]/gi,"")})),l.addEventListener("blur",(function(){o(this),c(this),s(this),r(this)})),a.forEach((t=>{t.addEventListener("input",e),t.addEventListener("blur",(function(){o(this),c(this),s(this),r(this)}))})),i.forEach((e=>{e.addEventListener("input",t),e.addEventListener("blur",(function(){o(this),s(this)}))})),u.forEach((e=>{e.addEventListener("input",n),e.addEventListener("blur",(function(){o(this),s(this)}))}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),c=document.querySelector(".calc-count"),s=document.querySelector(".calc-day"),r=document.getElementById("total");t.addEventListener("change",(t=>{t.target.matches(".calc-item")&&(()=>{let t=0,a=1,l=1,i=0,u=0;const d=+n.value,m=+o.value;c.value>1&&(a+=(c.value-1)/10),s.value&&s.value<5?l*=2:s.value&&s.value<10&&(l*=1.5),d&&m&&(t=e*d*m*a*l),r.textContent=i;const h=e=>{i+=Math.floor(Math.pow(i/5+1,1.5)),r.textContent=i,i<Math.floor(t)&&u?u=requestAnimationFrame(h):r.textContent=Math.floor(t)};t&&(u=requestAnimationFrame(h))})()}))})(100),t("form1"),t("form2"),t("form3")})();