(()=>{"use strict";const e=function(e){return 0===Math.floor(e/10)?"0"+e:e},t=e=>{const t=document.getElementById(e),o=document.createElement("div");o.style.cssText="font-size: 2rem;",t.addEventListener("submit",(e=>{e.preventDefault();const n=new FormData(t);t.appendChild(o),o.innerHTML='\n    <div class="preload-block"></div>\n    ',(e=>fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:e}))(n).then((e=>{if(200!==e.status)throw new Error("status network not 200!");o.textContent="Сообщение отправлено! Скоро с Вами свяжемся!",t.reset(),setTimeout((()=>{o.textContent=""}),5e3)})).catch((e=>{o.textContent="Что-то пошло не так...",console.error(e),setTimeout((()=>{o.textContent=""}),5e3)}))}))};(t=>{const o=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),c=document.querySelector("#timer-seconds"),s=document.querySelector("#timer-days");let a=null;const r=()=>{const t=(()=>{const e=(new Date("27 july 2021 12:43:50").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60),n=Math.floor(e/60/60%24);return{timeRemaining:e,days:Math.floor(e/60/60/24),hours:n,minutes:o,seconds:t}})();t.timeRemaining<=0&&(a&&(clearInterval(a),a=null),t.hours=0,t.minutes=0,t.seconds=0,t.days=0),o.textContent=e(t.hours),n.textContent=e(t.minutes),c.textContent=e(t.seconds),s.textContent=e(t.days)};r(),a=setInterval(r,1e3)})(),(()=>{const e=document.querySelector("body"),t=document.querySelector("menu"),o=()=>{t.classList.contains("active-menu")?t.classList.remove("active-menu"):t.classList.add("active-menu")};e.addEventListener("click",(e=>{let n=e.target;n.classList.contains("close-btn")&&e.preventDefault(),t.classList.contains("active-menu")?n.closest("menu")?(n=n.closest("a"),n&&o()):o():n.closest(".menu")&&o()}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),o=document.querySelector(".popup-content");let n=document.documentElement.clientWidth;window.addEventListener("resize",(()=>{n=document.documentElement.clientWidth}));const c=({duration:e,draw:t,timing:o})=>{const n=performance.now();requestAnimationFrame((function c(s){let a=(s-n)/e;a>1&&(a=1);const r=o(a);t(r),a<1&&requestAnimationFrame(c)}))},s=()=>{n>=768?(c({duration:800,timing:e=>Math.pow(e,5),draw(e){o.style.top=-1*e*100+"%"}}),setTimeout((()=>{e.classList.remove("active")}),800)):(o.style.top="",e.classList.remove("active"))};t.forEach((t=>{t.addEventListener("click",(()=>{e.classList.add("active"),o.style.top="",n>=768&&c({duration:800,timing:e=>Math.pow(e,3),draw(e){o.style.top=100*(-1+e)+"%"}})}))})),e.addEventListener("click",(e=>{let t=e.target;t.classList.contains("popup-close")?s():(t=t.closest(".popup-content"),t||s())}))})(),((e=.5)=>{const t=document.querySelectorAll('a[href^="#"]:not([href="#"])'),o=t=>{t.preventDefault();let o=0;const n=window.pageYOffset,c=t.target.closest("a").getAttribute("href"),s=document.querySelector(c).getBoundingClientRect().top-10,a=t=>{o||(o=t);const c=t-o,r=s<0?Math.max(n-c/e,n+s):Math.min(n+c/e,n+s);window.scrollTo(0,r),r<n+s&&requestAnimationFrame(a)};requestAnimationFrame(a)};t.forEach((e=>e.addEventListener("click",o)))})(.3),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n&&t.forEach(((e,c)=>{e===n&&(e=>{for(let n=0;n<o.length;n++)n===e?(t[n].classList.add("active"),o[n].classList.remove("d-none")):(t[n].classList.remove("active"),o[n].classList.add("d-none"))})(c)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-dots"),o=document.querySelector(".portfolio-content");let n,c=0;const s=(e,t,o)=>{e[t].classList.remove(o)},a=(e,t,o)=>{e[t].classList.add(o)},r=()=>{s(e,c,"portfolio-item-active"),s(t.childNodes,c,"dot-active"),c++,c>=e.length&&(c=0),a(e,c,"portfolio-item-active"),a(t.childNodes,c,"dot-active")},i=(e=3e3)=>{n=setInterval(r,e)};o.addEventListener("click",(o=>{o.preventDefault();let n=o.target;n.matches(".portfolio-btn, .dot")&&(s(e,c,"portfolio-item-active"),s(t.childNodes,c,"dot-active"),n.matches("#arrow-right")?c++:n.matches("#arrow-left")?c--:n.matches(".dot")&&t.childNodes.forEach(((e,t)=>{e===n&&(c=t)})),c>=e.length&&(c=0),c<0&&(c=e.length-1),a(e,c,"portfolio-item-active"),a(t.childNodes,c,"dot-active"))})),o.addEventListener("mouseover",(e=>{e.target.matches(".portfolio-btn, .dot")&&clearInterval(n)})),o.addEventListener("mouseout",(e=>{e.target.matches(".portfolio-btn, .dot")&&i(1500)}));const l=document.createElement("li");l.className="dot";for(let o=0;o<e.length;o++){const e=l.cloneNode();t.append(e)}t.childNodes[c].classList.add("dot-active"),i(1500)})(),(()=>{const e=document.querySelectorAll(".command__photo"),t=function(){const e=this.getAttribute("src");this.setAttribute("src",this.dataset.img),this.dataset.img=e};e.forEach((e=>{e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",t)}))})(),(()=>{const e=document.querySelectorAll("input.calc-item"),t=function(){this.value=this.value.replace(/\D/g,"")};e.forEach((e=>{e.addEventListener("input",t)}))})(),(()=>{const e=function(){this.value=this.value.replace(/[^а-яё ]/gi,"")},t=function(){this.value=this.value.replace(/(?![~@\-!_\.\*'])[\W\d]/gi,"")},o=function(){this.value=this.value.replace(/(?![+])\D/gi,"")},n=function(e){e.value=e.value.replace(/^[ \-]*/,""),e.value=e.value.replace(/[ \-]*$/,"")},c=function(e){e.value=e.value.replace(/ +/g," ")},s=function(e){e.value=e.value.replace(/-+/g,"-")},a=function(e){e.value=e.value.replace(/^(.{1})(.*)/,((e,t,o)=>t.toUpperCase()+o.toLowerCase()))},r=document.querySelectorAll('[name="user_name"]'),i=document.querySelector('[name="user_message"]'),l=document.querySelectorAll('[name="user_email"]'),u=document.querySelectorAll('[name="user_phone"]');i.addEventListener("input",(function(){this.value=this.value.replace(/[^а-яё ,\.!\?;\d]/gi,"")})),i.addEventListener("blur",(function(){n(this),c(this),s(this),a(this)})),r.forEach((t=>{t.addEventListener("input",e),t.addEventListener("blur",(function(){n(this),c(this),s(this),a(this)}))})),l.forEach((e=>{e.addEventListener("input",t),e.addEventListener("blur",(function(){n(this),s(this)}))})),u.forEach((e=>{e.addEventListener("input",o),e.addEventListener("blur",(function(){n(this),s(this)}))}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),c=document.querySelector(".calc-count"),s=document.querySelector(".calc-day"),a=document.getElementById("total");t.addEventListener("change",(t=>{t.target.matches(".calc-item")&&(()=>{let t=0,r=1,i=1,l=0,u=0;const d=+o.value,m=+n.value;c.value>1&&(r+=(c.value-1)/10),s.value&&s.value<5?i*=2:s.value&&s.value<10&&(i*=1.5),d&&m&&(t=e*d*m*r*i),a.textContent=l;const v=e=>{l+=Math.floor(Math.pow(l/5+1,1.5)),a.textContent=l,l<Math.floor(t)&&u?u=requestAnimationFrame(v):a.textContent=Math.floor(t)};t&&(u=requestAnimationFrame(v))})()}))})(100),t("form1"),t("form2"),t("form3")})();